CREATE TABLE IF NOT EXISTS administrator_log(
administrator VARCHAR(30) NOT NULL,
excecution_time DATETIME DEFAULT '2024-01-01 00:00:00',
PRIMARY KEY (administrator)
);




DELIMITER $
DROP TRIGGER IF EXISTS job_insert AFTER INSERT ON job
FOR EACH ROW 
BEGIN 
DECLARE current_datetime DATETIME ;
SET current_datetime = NOW();
INSERT INTO administrator_log VALUES (NEW.evaluator, current_datetime);
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS job_delete AFTER DELETE ON job
FOR EACH ROW 
BEGIN 
DECLARE current_datetime DATETIME ;
SET current_datetime = NOW();
INSERT INTO administrator_log VALUES (OLD.evaluator, current_datetime);
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS job_update AFTER UPDATE ON job
FOR EACH ROW 
BEGIN 
DECLARE current_datetime DATETIME ;
SET current_datetime = NOW();
INSERT INTO administrator_log VALUES (NEW.evaluator, current_datetime);
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS job_insert AFTER INSERT ON job
FOR EACH ROW 
BEGIN 
DECLARE current_datetime DATETIME ;
SET current_datetime = NOW();
INSERT INTO administrator_log VALUES (NEW.evaluator, current_datetime);
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS degree_insert AFTER INSERT ON has_degree
FOR EACH ROW 
BEGIN 
INSERT INTO administrator_log VALUES ( NEW.cand_usrname, NOW();
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS degree_update AFTER UPDATE ON has_degree
FOR EACH ROW 
BEGIN 
INSERT INTO administrator_log VALUES ( NEW.cand_usrname, NOW();
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS degree_delete AFTER DELETE ON has_degree
FOR EACH ROW 
BEGIN 
INSERT INTO administrator_log VALUES ( OLD.cand_usrname, NOW();
END$
DELIMITER;


DELIMITER $
DROP TRIGGER IF EXISTS user_insert AFTER INSERT ON user 
FOR EACH ROW 
BEGIN 
INSERT INTO administrator_log VALUES (NEW.username, NOW());
END$
DELIMITER;

DELIMITER $
DROP TRIGGER IF EXISTS user_update AFTER UPDATE ON user 
FOR EACH ROW 
BEGIN 
INSERT INTO administrator_log VALUES (NEW.username, NOW());
END$
DELIMITER;


DELIMITER $
DROP TRIGGER IF EXISTS user_delete AFTER DELETE ON user 
FOR EACH ROW 
BEGIN 
INSERT INTO administrator_log VALUES (OLD.username, NOW());
END$
DELIMITER;
